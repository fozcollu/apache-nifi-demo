{"failedCount":1,"prefixedPath":"classpath:NifiTests\/feature\/NifiTest.feature","packageQualifiedName":"NifiTests.feature.NifiTest","loopIndex":-1,"relativePath":"NifiTests\/feature\/NifiTest.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":6328600,"millis":6.3286,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":0,"text":"def dbHandler = Java.type('helpers.MongoDbHandler')"},"stepLog":"08:48:23.651 karate.env system property was: dev \n"},{"result":{"nanos":4492200,"millis":4.4922,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":1,"text":"def dataGenerator = Java.type('helpers.DataGenerator')"}},{"result":{"nanos":4294000,"millis":4.294,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def rabbitmqHandler = Java.type('helpers.RabbitMQHandler')"}},{"result":{"nanos":149190300,"millis":149.1903,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":3,"text":"def nifiRequestBody = read('classpath:NifiTests\/data\/nifiRequest.json')"}},{"result":{"nanos":3744600,"millis":3.7446,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":4,"text":"def sleep = function(ms){ java.lang.Thread.sleep(ms) }"}},{"result":{"nanos":520800,"millis":0.5208,"status":"passed"},"step":{"background":true,"line":10,"prefix":"Given","index":5,"text":"url apiUrl"}},{"result":{"nanos":138704000,"millis":138.704,"status":"passed"},"step":{"line":14,"prefix":"Given","index":0,"text":"def code = dataGenerator.getRandomCode()"}},{"result":{"nanos":3691600,"millis":3.6916,"status":"passed"},"step":{"line":15,"prefix":"Given","index":1,"text":"set nifiRequestBody.code =  code"}},{"result":{"nanos":967400,"millis":0.9674,"status":"passed"},"step":{"line":16,"prefix":"Given","index":2,"text":"path 'order'"}},{"result":{"nanos":386100,"millis":0.3861,"status":"passed"},"step":{"line":17,"prefix":"And","index":3,"text":"request nifiRequestBody"}},{"result":{"nanos":961145700,"errorMessage":"http call failed after 776 milliseconds for url: http:\/\/nifi:8050\/order\nclasspath:NifiTests\/feature\/NifiTest.feature:18","millis":961.1457,"status":"failed"},"step":{"line":18,"prefix":"When","index":4,"text":"method Post"},"stepLog":"08:48:25.022 request:\n1 > POST http:\/\/nifi:8050\/order\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 2352\n1 > Host: nifi:8050\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/11.0.10)\n1 > Accept-Encoding: gzip,deflate\n{\"token\":\"5f373562-591a-4db9-8609-7eec7880f28d\",\"code\":\"test-82\",\"comments\":{\"customerComment\":\"Please hurry, I am hungry\",\"vendorComment\":\"\"},\"createdAt\":\"2016-03-14T17:00:00.000Z\",\"customer\":{\"email\":\"s188sduisddsnjknsj\",\"firstName\":\"food\",\"lastName\":\"panda\",\"mobilePhone\":\"+49 99999999\",\"code\":\"dummy_customer_code\",\"id\":\"dummy_customer_Id\",\"mobilePhoneCountryCode\":\"\"},\"delivery\":{\"address\":{\"postcode\":10117,\"city\":\"Berlin\",\"street\":\"Oranienburger Sta√üe\",\"number\":67},\"expectedDeliveryTime\":\"2016-03-14T17:50:00.000Z\",\"expressDelivery\":false,\"riderPickupTime\":\"2016-03-14T17:35:00.000Z\"},\"discounts\":[{\"name\":\"Flat 30% OFF\",\"amount\":\"10,5\",\"type\":\"string\"}],\"expeditionType\":\"pickup\",\"expiryDate\":\"2016-03-14T17:15:00.000Z\",\"extraParameters\":{\"property1\":\"string\",\"property2\":\"string\"},\"localInfo\":{\"countryCode\":\"de\",\"currencySymbol\":\"\\u20AC\",\"platform\":\"Foodpanda\",\"platformKey\":\"FP_MY\",\"currencySymbolPosition\":\"\",\"currencySymbolSpaces\":\"\",\"decimalDigits\":\"\",\"decimalSeparator\":\"\",\"email\":\"\",\"phone\":\"\",\"thousandsSeparator\":\"\",\"website\":\"\"},\"payment\":{\"status\":\"online\",\"type\":\"paid\",\"remoteCode\":\"online\",\"requiredMoneyChange\":\"\",\"vatId\":\"\",\"vatName\":\"\"},\"test\":false,\"shortCode\":\"42\",\"preOrder\":false,\"pickup\":null,\"platformRestaurant\":{\"id\":\"sq-abcd\"},\"price\":{\"deliveryFees\":[{\"name\":\"packaging fee\",\"value\":2.5}],\"grandTotal\":\"25.50\",\"minimumDeliveryValue\":\"9.99\",\"payRestaurant\":\"25.50\",\"riderTip\":\"1.20\",\"subTotal\":\"19.45\",\"vatTotal\":\"2.50\",\"comission\":\"\",\"containerCharge\":\"\",\"deliveryFee\":\"12.80\",\"collectFromCustomer\":\"16.34\",\"discountAmountTotal\":\"2.50\",\"deliveryFeeDiscount\":\"\",\"serviceFeePercent\":\"\",\"serviceFeeTotal\":\"\",\"serviceTax\":0,\"serviceTaxValue\":0,\"differenceToMinimumDeliveryValue\":\"\",\"vatVisible\":true,\"vatPercent\":\"string\"},\"products\":[{\"categoryName\":\"Burgers\",\"name\":\"Double Cheese Burger\",\"paidPrice\":\"8.00\",\"quantity\":\"string\",\"remoteCode\":\"123456\",\"selectedToppings\":[{\"children\":[],\"name\":\"extra cheese\",\"price\":\"1.50\",\"quantity\":0,\"id\":\"string\",\"remoteCode\":null,\"type\":\"PRODUCT\"}],\"unitPrice\":\"6.42\",\"comment\":\"No cheese please\",\"description\":\"\",\"discountAmount\":\"\",\"halfHalf\":false,\"id\":\"string\",\"selectedChoices\":[],\"variation\":{\"name\":\"Double Cheese Burger\"},\"vatPercentage\":\"\"}],\"corporateOrder\":false,\"corporateTaxId\":\"example-tax-id\",\"integrationInfo\":{},\"mobileOrder\":true,\"webOrder\":false,\"vouchers\":[]}\n\n08:48:25.116 karate.org.apache.http.conn.HttpHostConnectException: Connect to nifi:8050 [nifi\/172.21.0.6] failed: Connection refused (Connection refused), http call failed after 776 milliseconds for url: http:\/\/nifi:8050\/order\n08:48:25.118 classpath:NifiTests\/feature\/NifiTest.feature:18\nWhen method Post\nhttp call failed after 776 milliseconds for url: http:\/\/nifi:8050\/order\nclasspath:NifiTests\/feature\/NifiTest.feature:18\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":19,"prefix":"Then","index":5,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":20,"prefix":"*","index":6,"text":"eval sleep(10000)"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":21,"prefix":"*","index":7,"text":"def mongoDbResponse =  karate.toString(karate.toJson(dbHandler.findKeyValue(mongodbInfo, \"code\",code)))"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":22,"prefix":"*","index":8,"text":"print mongoDbResponse"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":23,"prefix":"Then","index":9,"text":"match mongoDbResponse contains code"}}],"line":13,"description":"","durationMillis":1273.4653,"failed":true,"error":"http call failed after 776 milliseconds for url: http:\/\/nifi:8050\/order\nclasspath:NifiTests\/feature\/NifiTest.feature:18","tags":["nifi1","nifi"],"executorName":"pool-1-thread-1","name":"Nifi Test - Check With Code from db","startTime":1654850903513,"refId":"[1:13]","endTime":1654850905118,"exampleIndex":-1}],"callDepth":0,"name":"Nifi Test","description":"","resultDate":"2022-06-10 08:48:25 AM","durationMillis":1273.4653,"passedCount":0}